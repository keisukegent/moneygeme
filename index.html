<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒãƒãƒ¼ã‚¯ã‚¨ã‚¹ãƒˆ - æŠ•è³‡å†’é™ºã‚²ãƒ¼ãƒ </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(45deg, #1a1a2e, #16213e, #0f3460);
            color: #fff;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="stars" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="1" fill="%23fff" opacity="0.3"/><circle cx="30" cy="30" r="0.5" fill="%23fff" opacity="0.5"/><circle cx="70" cy="20" r="1.5" fill="%23fff" opacity="0.2"/><circle cx="90" cy="60" r="1" fill="%23fff" opacity="0.4"/><circle cx="50" cy="80" r="0.8" fill="%23fff" opacity="0.3"/></pattern></defs><rect width="100" height="100" fill="url(%23stars)"/></svg>');
            z-index: -1;
            animation: twinkle 3s infinite alternate;
        }

        @keyframes twinkle {
            0% { opacity: 0.3; }
            100% { opacity: 0.8; }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .game-header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            padding: 20px;
            border: 3px solid #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        .game-title {
            font-size: 3rem;
            color: #ffd700;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8);
            margin-bottom: 10px;
            font-weight: bold;
        }

        .game-subtitle {
            font-size: 1.2rem;
            color: #87ceeb;
            margin-bottom: 20px;
        }

        .status-bar {
            display: flex;
            justify-content: space-around;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            border: 2px solid #4169e1;
        }

        .status-item {
            text-align: center;
        }

        .status-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #ffd700;
        }

        .status-label {
            font-size: 0.9rem;
            color: #87ceeb;
        }

        .game-area {
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            border: 2px solid #4169e1;
            box-shadow: 0 0 15px rgba(65, 105, 225, 0.3);
        }

        .world-map {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .area-card {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .area-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .area-card:hover {
            transform: translateY(-5px);
            border-color: #ffd700;
            box-shadow: 0 10px 20px rgba(255, 215, 0, 0.3);
        }

        .area-card:hover::before {
            left: 100%;
        }

        .area-icon {
            font-size: 3rem;
            margin-bottom: 10px;
            display: block;
        }

        .area-name {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #fff;
        }

        .area-description {
            font-size: 0.9rem;
            color: #ddd;
            line-height: 1.4;
        }

        .quiz-section {
            display: none;
            background: rgba(0, 0, 0, 0.9);
            border-radius: 15px;
            padding: 30px;
            border: 3px solid #ff6b6b;
        }

        .quiz-question {
            font-size: 1.4rem;
            margin-bottom: 20px;
            color: #fff;
            line-height: 1.6;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .quiz-option {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            padding: 15px;
            border-radius: 8px;
            color: #fff;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .quiz-option:hover {
            background: linear-gradient(135deg, #764ba2, #667eea);
            border-color: #ffd700;
            transform: scale(1.02);
        }

        .character-dialogue {
            background: rgba(0, 0, 0, 0.9);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 5px solid #ffd700;
            position: relative;
        }

        .character-name {
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .character-text {
            line-height: 1.6;
            color: #fff;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            justify-content: center;
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: #fff;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            font-weight: bold;
        }

        .btn:hover {
            background: linear-gradient(135deg, #764ba2, #667eea);
            border-color: #ffd700;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .btn-primary {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #333;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #ffed4e, #ffd700);
        }

        .result-message {
            text-align: center;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .result-correct {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            border: 2px solid #1e8449;
        }

        .result-incorrect {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            border: 2px solid #922b21;
        }

        .progress-bar {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            height: 20px;
            margin: 10px 0;
            overflow: hidden;
            border: 1px solid #444;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .world-map {
                grid-template-columns: 1fr;
            }
            
            .game-title {
                font-size: 2rem;
            }
            
            .status-bar {
                flex-direction: column;
                gap: 10px;
            }
            
            .action-buttons {
                flex-direction: column;
            }
        }

        .float-animation {
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .pulse-animation {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .special-reward {
            background: linear-gradient(135deg, #ff6b6b, #ffd93d, #6bcf7f, #4d79ff, #9c88ff);
            background-size: 300% 300%;
            animation: rainbow 3s ease infinite;
            border: 3px solid #ffd700;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
        }

        @keyframes rainbow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .reward-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .reward-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            border: 5px solid #ffd700;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.8);
            max-width: 600px;
            width: 90%;
            position: relative;
            overflow: hidden;
        }

        .reward-content::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, transparent 70%);
            animation: glow-rotate 4s linear infinite;
        }

        @keyframes glow-rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .reward-title {
            font-size: 3rem;
            color: #ffd700;
            margin-bottom: 20px;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8);
            position: relative;
            z-index: 1;
        }

        .reward-message {
            font-size: 1.4rem;
            margin-bottom: 30px;
            line-height: 1.6;
            position: relative;
            z-index: 1;
        }

        .consultation-info {
            background: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            border: 2px solid #4169e1;
            position: relative;
            z-index: 1;
        }

        .consultation-title {
            font-size: 1.8rem;
            color: #87ceeb;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .consultation-details {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 20px;
        }

        .consultation-features {
            text-align: left;
            margin: 20px 0;
        }

        .consultation-features li {
            margin: 10px 0;
            padding-left: 20px;
            position: relative;
        }

        .consultation-features li::before {
            content: 'âœ…';
            position: absolute;
            left: 0;
        }

        .btn-special {
            background: linear-gradient(135deg, #ff6b6b, #ffd93d);
            color: #fff;
            font-size: 1.2rem;
            padding: 15px 30px;
            border-radius: 30px;
            border: 3px solid #ffd700;
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.5);
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            animation: special-glow 2s ease-in-out infinite alternate;
        }

        @keyframes special-glow {
            0% { box-shadow: 0 5px 20px rgba(255, 215, 0, 0.5); }
            100% { box-shadow: 0 5px 30px rgba(255, 215, 0, 0.8), 0 0 40px rgba(255, 107, 107, 0.3); }
        }

        .btn-special:hover {
            background: linear-gradient(135deg, #ffd93d, #ff6b6b);
            transform: translateY(-3px);
        }

        .fireworks {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .firework {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            animation: firework 1.5s ease-out infinite;
        }

        @keyframes firework {
            0% {
                opacity: 1;
                transform: scale(0) translate(0, 0);
            }
            100% {
                opacity: 0;
                transform: scale(1) translate(var(--dx), var(--dy));
            }
        }

        .gold-highlight {
            color: #ffd700;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            animation: gold-shimmer 2s ease-in-out infinite;
        }

        @keyframes gold-shimmer {
            0%, 100% { color: #ffd700; }
            50% { color: #ffed4e; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="game-header float-animation">
            <h1 class="game-title">ğŸ° ãƒãƒãƒ¼ã‚¯ã‚¨ã‚¹ãƒˆ ğŸ°</h1>
            <p class="game-subtitle">ã€œãŠé‡‘ã®ç‹å›½ã‚’å†’é™ºã—ã¦æŠ•è³‡ã®çŸ¥è­˜ã‚’èº«ã«ã¤ã‘ã‚ˆã†ã€œ</p>
        </header>

        <div class="status-bar">
            <div class="status-item">
                <div class="status-value" id="goldAmount">1000</div>
                <div class="status-label">ğŸ’° ã‚´ãƒ¼ãƒ«ãƒ‰</div>
            </div>
            <div class="status-item">
                <div class="status-value" id="playerLevel">1</div>
                <div class="status-label">â­ ãƒ¬ãƒ™ãƒ«</div>
            </div>
            <div class="status-item">
                <div class="status-value" id="playerExp">0</div>
                <div class="status-label">âœ¨ çµŒé¨“å€¤</div>
            </div>
            <div class="status-item">
                <div class="status-value" id="currentArea">ãŠé‡‘ã®ç‹å›½</div>
                <div class="status-label">ğŸ—ºï¸ ç¾åœ¨åœ°</div>
            </div>
        </div>

        <main class="game-area">
            <div id="worldMap" class="world-map">
                <div class="area-card pulse-animation" onclick="enterArea('stocks')">
                    <span class="area-icon">ğŸŒ²</span>
                    <h3 class="area-name">æ ªã®æ£®</h3>
                    <p class="area-description">æ ªå¼æŠ•è³‡ã®åŸºæœ¬ã‚’å­¦ã¹ã‚‹ç¥ç§˜çš„ãªæ£®ã€‚è³¢è€…ãƒ•ã‚¯ãƒ­ã‚¦ãŒæŠ•è³‡ã®å¿ƒå¾—ã‚’æ•™ãˆã¦ãã‚Œã¾ã™ã€‚</p>
                </div>
                
                <div class="area-card pulse-animation" onclick="enterArea('insurance')">
                    <span class="area-icon">ğŸ”ï¸</span>
                    <h3 class="area-name">ä¿é™ºã®æ´çªŸ</h3>
                    <p class="area-description">ãƒªã‚¹ã‚¯ã«å‚™ãˆã‚‹ä¿é™ºã®çŸ¥è­˜ãŒçœ ã‚‹æ´çªŸã€‚ãƒ‰ãƒ©ã‚´ãƒ³ãŒä¿é™ºã®é‡è¦æ€§ã‚’èª¬ã„ã¦ãã‚Œã¾ã™ã€‚</p>
                </div>
                
                <div class="area-card pulse-animation" onclick="enterArea('pension')">
                    <span class="area-icon">ğŸ—¼</span>
                    <h3 class="area-name">å¹´é‡‘ã®å¡”</h3>
                    <p class="area-description">è€å¾Œã®å‚™ãˆã«ã¤ã„ã¦å­¦ã¹ã‚‹é«˜ã„å¡”ã€‚è³¢è€…ãŒå¹´é‡‘åˆ¶åº¦ã®ä»•çµ„ã¿ã‚’è§£èª¬ã—ã¦ãã‚Œã¾ã™ã€‚</p>
                </div>
            </div>


            <div id="quizSection" class="quiz-section">
                <div class="character-dialogue">
                    <div class="character-name" id="characterName">æ¡ˆå†…äºº</div>
                    <div class="character-text" id="characterDialogue">
                        ã‚ˆã†ã“ãã€å‹‡æ•¢ãªå†’é™ºè€…ã‚ˆï¼ãŠé‡‘ã®ç‹å›½ã¸ã‚ˆã†ã“ãã€‚
                    </div>
                </div>

                <div id="quizContent">
                    <h3 class="quiz-question" id="questionText"></h3>
                    <div class="quiz-options" id="optionsContainer"></div>
                </div>

                <div id="resultMessage" class="result-message hidden"></div>

                <div class="action-buttons">
                    <button class="btn btn-primary" id="nextButton" onclick="nextQuestion()" style="display: none;">æ¬¡ã®å•é¡Œã¸</button>
                    <button class="btn" onclick="returnToMap()">ãƒãƒƒãƒ—ã«æˆ»ã‚‹</button>
                </div>
            </div>
        </main>
    </div>

    <script>
        let gameState = {
            gold: 1000,
            level: 1,
            exp: 0,
            currentArea: 'map',
            currentQuestionIndex: 0,
            currentAreaQuestions: []
        };

        const gameData = {
            stocks: {
                name: 'æ ªã®æ£®',
                character: 'ğŸ¦‰ ãƒ•ã‚¯ãƒ­ã‚¦è³¢è€…',
                questions: [
                    {
                        question: 'æ ªå¼æŠ•è³‡ã«ãŠã‘ã‚‹ã€Œåˆ†æ•£æŠ•è³‡ã€ã®æœ€å¤§ã®ãƒ¡ãƒªãƒƒãƒˆã¯ä½•ã§ã—ã‚‡ã†ã‹ï¼Ÿ',
                        options: [
                            'ã‚ˆã‚Šå¤šãã®åˆ©ç›Šã‚’å¾—ã‚‰ã‚Œã‚‹',
                            'ãƒªã‚¹ã‚¯ã‚’è»½æ¸›ã§ãã‚‹',
                            'æ‰‹æ•°æ–™ãŒå®‰ããªã‚‹',
                            'å¿…ãšåˆ©ç›ŠãŒå‡ºã‚‹'
                        ],
                        correct: 1,
                        explanation: 'åˆ†æ•£æŠ•è³‡ã¯ã€è¤‡æ•°ã®éŠ˜æŸ„ã«æŠ•è³‡ã™ã‚‹ã“ã¨ã§ãƒªã‚¹ã‚¯ã‚’åˆ†æ•£ã—ã€ä¸€ã¤ã®æŠ•è³‡å…ˆãŒä¸‹ãŒã£ã¦ã‚‚å…¨ä½“ã¸ã®å½±éŸ¿ã‚’å°ã•ãã§ãã‚‹ã®ãŒæœ€å¤§ã®ãƒ¡ãƒªãƒƒãƒˆã§ã™ã€‚'
                    },
                    {
                        question: 'æ ªä¾¡ãŒä¸‹ãŒã£ãŸæ™‚ã®æ­£ã—ã„å¿ƒæ§‹ãˆã¯ï¼Ÿ',
                        options: [
                            'ã™ãã«å£²å´ã™ã‚‹',
                            'æ…Œã¦ãšã«çŠ¶æ³ã‚’åˆ†æã™ã‚‹',
                            'ã‚ˆã‚Šå¤šãè²·ã„å¢—ã—ã™ã‚‹',
                            'æŠ•è³‡ã‚’ã‚„ã‚ã‚‹'
                        ],
                        correct: 1,
                        explanation: 'æ ªä¾¡ã®å¤‰å‹•ã¯è‡ªç„¶ãªã“ã¨ã§ã™ã€‚é‡è¦ãªã®ã¯æ„Ÿæƒ…çš„ã«ãªã‚‰ãšã€ä¼æ¥­ã® fundamentals ã‚„å¸‚å ´ã®çŠ¶æ³ã‚’å†·é™ã«åˆ†æã™ã‚‹ã“ã¨ã§ã™ã€‚'
                    },
                    {
                        question: 'é•·æœŸæŠ•è³‡ã®æœ€å¤§ã®ãƒ¡ãƒªãƒƒãƒˆã¯ï¼Ÿ',
                        options: [
                            'çŸ­æœŸé–“ã§å¤§ããªåˆ©ç›ŠãŒå¾—ã‚‰ã‚Œã‚‹',
                            'è¤‡åˆ©åŠ¹æœã‚’æ´»ç”¨ã§ãã‚‹',
                            'æ¯æ—¥å£²è²·ã™ã‚‹å¿…è¦ãŒãªã„',
                            'çµ¶å¯¾ã«æã‚’ã—ãªã„'
                        ],
                        correct: 1,
                        explanation: 'é•·æœŸæŠ•è³‡ã§ã¯è¤‡åˆ©åŠ¹æœã«ã‚ˆã‚Šã€åˆ©ç›ŠãŒåˆ©ç›Šã‚’ç”Ÿã‚€åŠ¹æœã§è³‡ç”£ãŒæŒ‡æ•°é–¢æ•°çš„ã«æˆé•·ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚æ™‚é–“ã‚’å‘³æ–¹ã«ã¤ã‘ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚'
                    }
                ]
            },
            insurance: {
                name: 'ä¿é™ºã®æ´çªŸ',
                character: 'ğŸ‰ ãƒ‰ãƒ©ã‚´ãƒ³ãƒ»ãƒ—ãƒ­ãƒ†ã‚¯ãƒˆ',
                questions: [
                    {
                        question: 'ç”Ÿå‘½ä¿é™ºã®ä¸»ãªç›®çš„ã¯ä½•ã§ã—ã‚‡ã†ã‹ï¼Ÿ',
                        options: [
                            'æŠ•è³‡ã§åˆ©ç›Šã‚’å¾—ã‚‹ã“ã¨',
                            'å®¶æ—ã®ç”Ÿæ´»ã‚’å®ˆã‚‹ã“ã¨',
                            'ç¨é‡‘ã‚’å®‰ãã™ã‚‹ã“ã¨',
                            'ãŠé‡‘ã‚’è²¯ã‚ã‚‹ã“ã¨'
                        ],
                        correct: 1,
                        explanation: 'ç”Ÿå‘½ä¿é™ºã®æœ€ã‚‚é‡è¦ãªç›®çš„ã¯ã€ä¸‡ãŒä¸€ã®äº‹æ…‹ãŒèµ·ããŸæ™‚ã«æ®‹ã•ã‚ŒãŸå®¶æ—ã®ç”Ÿæ´»ã‚’çµŒæ¸ˆçš„ã«æ”¯ãˆã‚‹ã“ã¨ã§ã™ã€‚'
                    },
                    {
                        question: 'åŒ»ç™‚ä¿é™ºã‚’é¸ã¶éš›ã«æœ€ã‚‚é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã¯ï¼Ÿ',
                        options: [
                            'ä¿é™ºæ–™ã®å®‰ã•',
                            'ä¿éšœå†…å®¹ã®å……å®Ÿåº¦',
                            'ä¼šç¤¾ã®çŸ¥ååº¦',
                            'å–¶æ¥­æ‹…å½“è€…ã®äººæŸ„'
                        ],
                        correct: 1,
                        explanation: 'åŒ»ç™‚ä¿é™ºã§ã¯ã€è‡ªåˆ†ã«å¿…è¦ãªä¿éšœãŒãã¡ã‚“ã¨ã‚«ãƒãƒ¼ã•ã‚Œã¦ã„ã‚‹ã‹ãŒæœ€é‡è¦ã§ã™ã€‚ä¾¡æ ¼ã ã‘ã§ãªãå†…å®¹ã‚’ã—ã£ã‹ã‚Šç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚'
                    },
                    {
                        question: 'è‡ªå‹•è»Šä¿é™ºã®ã€Œå¯¾äººè³ å„Ÿã€ã¨ã¯ä½•ã‚’ä¿éšœã™ã‚‹ã‚‚ã®ï¼Ÿ',
                        options: [
                            'è‡ªåˆ†ã®è»Šã®ä¿®ç†è²»',
                            'ä»–äººã«ã‚±ã‚¬ã‚’ã•ã›ãŸæ™‚ã®è³ å„Ÿ',
                            'è‡ªåˆ†ã®ã‚±ã‚¬ã®æ²»ç™‚è²»',
                            'ç›—é›£ã•ã‚ŒãŸæ™‚ã®è£œå„Ÿ'
                        ],
                        correct: 1,
                        explanation: 'å¯¾äººè³ å„Ÿä¿é™ºã¯ã€äº‹æ•…ã§ä»–äººã«ã‚±ã‚¬ã‚’ã•ã›ã¦ã—ã¾ã£ãŸå ´åˆã®æ²»ç™‚è²»ã‚„æ…°è¬æ–™ãªã©ã‚’è£œå„Ÿã—ã¾ã™ã€‚ã¨ã¦ã‚‚é‡è¦ãªä¿éšœã§ã™ã€‚'
                    }
                ]
            },
            pension: {
                name: 'å¹´é‡‘ã®å¡”',
                character: 'ğŸ§™â€â™‚ï¸ å¹´é‡‘ãƒã‚¹ã‚¿ãƒ¼',
                questions: [
                    {
                        question: 'å›½æ°‘å¹´é‡‘ã®åŠ å…¥ç¾©å‹™ãŒã‚ã‚‹ã®ã¯ä½•æ­³ã‹ã‚‰ä½•æ­³ã¾ã§ã§ã—ã‚‡ã†ã‹ï¼Ÿ',
                        options: [
                            '18æ­³ã‹ã‚‰65æ­³ã¾ã§',
                            '20æ­³ã‹ã‚‰60æ­³ã¾ã§',
                            '25æ­³ã‹ã‚‰65æ­³ã¾ã§',
                            '20æ­³ã‹ã‚‰65æ­³ã¾ã§'
                        ],
                        correct: 1,
                        explanation: 'å›½æ°‘å¹´é‡‘ã¯20æ­³ã‹ã‚‰60æ­³ã¾ã§ã®40å¹´é–“ã®åŠ å…¥ãŒç¾©å‹™ä»˜ã‘ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®æœŸé–“ã«ã—ã£ã‹ã‚Šä¿é™ºæ–™ã‚’ç´ã‚ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚'
                    },
                    {
                        question: 'iDeCoï¼ˆå€‹äººå‹ç¢ºå®šæ‹ å‡ºå¹´é‡‘ï¼‰ã®æœ€å¤§ã®ãƒ¡ãƒªãƒƒãƒˆã¯ï¼Ÿ',
                        options: [
                            'å…ƒæœ¬ãŒä¿è¨¼ã•ã‚Œã¦ã„ã‚‹',
                            'æ›é‡‘ãŒå…¨é¡æ‰€å¾—æ§é™¤ã«ãªã‚‹',
                            'è‡ªç”±ã«å¼•ãå‡ºã›ã‚‹',
                            'æ”¿åºœãŒé‹ç”¨ã—ã¦ãã‚Œã‚‹'
                        ],
                        correct: 1,
                        explanation: 'iDeCoã®æ›é‡‘ã¯å…¨é¡æ‰€å¾—æ§é™¤ã®å¯¾è±¡ã¨ãªã‚‹ãŸã‚ã€æ‰€å¾—ç¨ã‚„ä½æ°‘ç¨ãŒè»½æ¸›ã•ã‚Œã‚‹å¤§ããªãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ã€‚'
                    },
                    {
                        question: 'å¹´é‡‘ã®ã€Œ2éšå»ºã¦ã€æ§‹é€ ã¨ã¯ï¼Ÿ',
                        options: [
                            'å›½æ°‘å¹´é‡‘ã¨åšç”Ÿå¹´é‡‘ã®çµ„ã¿åˆã‚ã›',
                            'å›½å†…å¹´é‡‘ã¨æµ·å¤–å¹´é‡‘ã®çµ„ã¿åˆã‚ã›',
                            'åŸºç¤å¹´é‡‘ã¨å¿œç”¨å¹´é‡‘ã®çµ„ã¿åˆã‚ã›',
                            'å…¬çš„å¹´é‡‘ã¨æ°‘é–“å¹´é‡‘ã®çµ„ã¿åˆã‚ã›'
                        ],
                        correct: 0,
                        explanation: 'æ—¥æœ¬ã®å¹´é‡‘åˆ¶åº¦ã¯ã€1éšéƒ¨åˆ†ãŒå›½æ°‘å¹´é‡‘ï¼ˆåŸºç¤å¹´é‡‘ï¼‰ã€2éšéƒ¨åˆ†ãŒåšç”Ÿå¹´é‡‘ã¨ã„ã†2éšå»ºã¦ã®æ§‹é€ ã«ãªã£ã¦ã„ã¾ã™ã€‚'
                    }
                ]
            }
        };

        function updateDisplay() {
            const goldElement = document.getElementById('goldAmount');
            goldElement.textContent = gameState.gold;
            
            
            document.getElementById('playerLevel').textContent = gameState.level;
            document.getElementById('playerExp').textContent = gameState.exp;
            document.getElementById('currentArea').textContent = 
                gameState.currentArea === 'map' ? 'ãŠé‡‘ã®ç‹å›½' : gameData[gameState.currentArea]?.name || 'ãŠé‡‘ã®ç‹å›½';
        }

        function enterArea(areaId) {
            gameState.currentArea = areaId;
            gameState.currentAreaQuestions = [...gameData[areaId].questions];
            gameState.currentQuestionIndex = 0;
            
            document.getElementById('worldMap').style.display = 'none';
            document.getElementById('quizSection').style.display = 'block';
            
            document.getElementById('characterName').textContent = gameData[areaId].character;
            document.getElementById('characterDialogue').textContent = 
                `${gameData[areaId].name}ã¸ã‚ˆã†ã“ãï¼ã“ã“ã§ã¯${areaId === 'stocks' ? 'æ ªå¼æŠ•è³‡' : areaId === 'insurance' ? 'ä¿é™º' : 'å¹´é‡‘'}ã«ã¤ã„ã¦å­¦ã¹ã¾ã™ã€‚æº–å‚™ã¯ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ`;
            
            showQuestion();
            updateDisplay();
        }

        function showQuestion() {
            const area = gameData[gameState.currentArea];
            const question = area.questions[gameState.currentQuestionIndex];
            
            document.getElementById('questionText').textContent = question.question;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'quiz-option';
                button.textContent = option;
                button.onclick = () => answerQuestion(index);
                optionsContainer.appendChild(button);
            });
            
            document.getElementById('resultMessage').classList.add('hidden');
            document.getElementById('nextButton').style.display = 'none';
        }

        function answerQuestion(selectedIndex) {
            const area = gameData[gameState.currentArea];
            const question = area.questions[gameState.currentQuestionIndex];
            const resultDiv = document.getElementById('resultMessage');
            
            const options = document.querySelectorAll('.quiz-option');
            options.forEach(option => option.disabled = true);
            
            if (selectedIndex === question.correct) {
                resultDiv.textContent = 'æ­£è§£ï¼ ã‚´ãƒ¼ãƒ«ãƒ‰ã‚’ç²å¾—ã—ã¾ã—ãŸï¼';
                resultDiv.className = 'result-message result-correct';
                gameState.gold += 200;
                gameState.exp += 100;
                
                if (gameState.exp >= gameState.level * 300) {
                    gameState.level++;
                    gameState.exp = 0;
                    resultDiv.textContent += ' ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ã—ã¾ã—ãŸï¼';
                }
            } else {
                resultDiv.textContent = 'ä¸æ­£è§£... ã‚´ãƒ¼ãƒ«ãƒ‰ãŒæ¸›ã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚';
                resultDiv.className = 'result-message result-incorrect';
                gameState.gold = Math.max(0, gameState.gold - 100);
            }
            
            resultDiv.classList.remove('hidden');
            
            setTimeout(() => {
                document.getElementById('characterDialogue').textContent = question.explanation;
                document.getElementById('nextButton').style.display = 'inline-block';
            }, 2000);
            
            updateDisplay();
        }

        function nextQuestion() {
            gameState.currentQuestionIndex++;
            
            if (gameState.currentQuestionIndex >= gameData[gameState.currentArea].questions.length) {
                document.getElementById('characterDialogue').textContent = 
                    `ç´ æ™´ã‚‰ã—ã„ï¼${gameData[gameState.currentArea].name}ã®ã‚¯ã‚¨ã‚¹ãƒˆã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸï¼ä»–ã®ã‚¨ãƒªã‚¢ã‚‚æŒ‘æˆ¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚`;
                document.getElementById('quizContent').innerHTML = '<div style="text-align: center; padding: 40px;"><h2 style="color: #ffd700;">ğŸ‰ ã‚¨ãƒªã‚¢ã‚¯ãƒªã‚¢ï¼ ğŸ‰</h2><p>ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ã“ã®ã‚¨ãƒªã‚¢ã®ã™ã¹ã¦ã®å•é¡Œã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸã€‚</p></div>';
                document.getElementById('nextButton').style.display = 'none';
            } else {
                showQuestion();
            }
        }

        function returnToMap() {
            gameState.currentArea = 'map';
            document.getElementById('worldMap').style.display = 'grid';
            document.getElementById('quizSection').style.display = 'none';
            updateDisplay();
        }


        updateDisplay();
    </script>
</body>
</html>