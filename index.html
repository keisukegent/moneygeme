<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>マネークエスト - 投資冒険ゲーム</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(45deg, #1a1a2e, #16213e, #0f3460);
            color: #fff;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="stars" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="1" fill="%23fff" opacity="0.3"/><circle cx="30" cy="30" r="0.5" fill="%23fff" opacity="0.5"/><circle cx="70" cy="20" r="1.5" fill="%23fff" opacity="0.2"/><circle cx="90" cy="60" r="1" fill="%23fff" opacity="0.4"/><circle cx="50" cy="80" r="0.8" fill="%23fff" opacity="0.3"/></pattern></defs><rect width="100" height="100" fill="url(%23stars)"/></svg>');
            z-index: -1;
            animation: twinkle 3s infinite alternate;
        }

        @keyframes twinkle {
            0% { opacity: 0.3; }
            100% { opacity: 0.8; }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .game-header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            padding: 20px;
            border: 3px solid #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        .game-title {
            font-size: 3rem;
            color: #ffd700;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8);
            margin-bottom: 10px;
            font-weight: bold;
        }

        .game-subtitle {
            font-size: 1.2rem;
            color: #87ceeb;
            margin-bottom: 20px;
        }

        .status-bar {
            display: flex;
            justify-content: space-around;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            border: 2px solid #4169e1;
        }

        .status-item {
            text-align: center;
        }

        .status-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #ffd700;
        }

        .status-label {
            font-size: 0.9rem;
            color: #87ceeb;
        }

        .game-area {
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            border: 2px solid #4169e1;
            box-shadow: 0 0 15px rgba(65, 105, 225, 0.3);
        }

        .world-map {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .area-card {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .area-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .area-card:hover {
            transform: translateY(-5px);
            border-color: #ffd700;
            box-shadow: 0 10px 20px rgba(255, 215, 0, 0.3);
        }

        .area-card:hover::before {
            left: 100%;
        }

        .area-icon {
            font-size: 3rem;
            margin-bottom: 10px;
            display: block;
        }

        .area-name {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #fff;
        }

        .area-description {
            font-size: 0.9rem;
            color: #ddd;
            line-height: 1.4;
        }

        .quiz-section {
            display: none;
            background: rgba(0, 0, 0, 0.9);
            border-radius: 15px;
            padding: 30px;
            border: 3px solid #ff6b6b;
        }

        .quiz-question {
            font-size: 1.4rem;
            margin-bottom: 20px;
            color: #fff;
            line-height: 1.6;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .quiz-option {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            padding: 15px;
            border-radius: 8px;
            color: #fff;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .quiz-option:hover {
            background: linear-gradient(135deg, #764ba2, #667eea);
            border-color: #ffd700;
            transform: scale(1.02);
        }

        .character-dialogue {
            background: rgba(0, 0, 0, 0.9);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 5px solid #ffd700;
            position: relative;
        }

        .character-name {
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .character-text {
            line-height: 1.6;
            color: #fff;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            justify-content: center;
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: #fff;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            font-weight: bold;
        }

        .btn:hover {
            background: linear-gradient(135deg, #764ba2, #667eea);
            border-color: #ffd700;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .btn-primary {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #333;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #ffed4e, #ffd700);
        }

        .result-message {
            text-align: center;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .result-correct {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            border: 2px solid #1e8449;
        }

        .result-incorrect {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            border: 2px solid #922b21;
        }

        .progress-bar {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            height: 20px;
            margin: 10px 0;
            overflow: hidden;
            border: 1px solid #444;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .world-map {
                grid-template-columns: 1fr;
            }
            
            .game-title {
                font-size: 2rem;
            }
            
            .status-bar {
                flex-direction: column;
                gap: 10px;
            }
            
            .action-buttons {
                flex-direction: column;
            }
        }

        .float-animation {
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .pulse-animation {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .special-reward {
            background: linear-gradient(135deg, #ff6b6b, #ffd93d, #6bcf7f, #4d79ff, #9c88ff);
            background-size: 300% 300%;
            animation: rainbow 3s ease infinite;
            border: 3px solid #ffd700;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
        }

        @keyframes rainbow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .reward-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .reward-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            border: 5px solid #ffd700;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.8);
            max-width: 600px;
            width: 90%;
            position: relative;
            overflow: hidden;
        }

        .reward-content::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, transparent 70%);
            animation: glow-rotate 4s linear infinite;
        }

        @keyframes glow-rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .reward-title {
            font-size: 3rem;
            color: #ffd700;
            margin-bottom: 20px;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8);
            position: relative;
            z-index: 1;
        }

        .reward-message {
            font-size: 1.4rem;
            margin-bottom: 30px;
            line-height: 1.6;
            position: relative;
            z-index: 1;
        }

        .consultation-info {
            background: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            border: 2px solid #4169e1;
            position: relative;
            z-index: 1;
        }

        .consultation-title {
            font-size: 1.8rem;
            color: #87ceeb;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .consultation-details {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 20px;
        }

        .consultation-features {
            text-align: left;
            margin: 20px 0;
        }

        .consultation-features li {
            margin: 10px 0;
            padding-left: 20px;
            position: relative;
        }

        .consultation-features li::before {
            content: '✅';
            position: absolute;
            left: 0;
        }

        .btn-special {
            background: linear-gradient(135deg, #ff6b6b, #ffd93d);
            color: #fff;
            font-size: 1.2rem;
            padding: 15px 30px;
            border-radius: 30px;
            border: 3px solid #ffd700;
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.5);
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            animation: special-glow 2s ease-in-out infinite alternate;
        }

        @keyframes special-glow {
            0% { box-shadow: 0 5px 20px rgba(255, 215, 0, 0.5); }
            100% { box-shadow: 0 5px 30px rgba(255, 215, 0, 0.8), 0 0 40px rgba(255, 107, 107, 0.3); }
        }

        .btn-special:hover {
            background: linear-gradient(135deg, #ffd93d, #ff6b6b);
            transform: translateY(-3px);
        }

        .fireworks {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .firework {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            animation: firework 1.5s ease-out infinite;
        }

        @keyframes firework {
            0% {
                opacity: 1;
                transform: scale(0) translate(0, 0);
            }
            100% {
                opacity: 0;
                transform: scale(1) translate(var(--dx), var(--dy));
            }
        }

        .gold-highlight {
            color: #ffd700;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            animation: gold-shimmer 2s ease-in-out infinite;
        }

        @keyframes gold-shimmer {
            0%, 100% { color: #ffd700; }
            50% { color: #ffed4e; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="game-header float-animation">
            <h1 class="game-title">🏰 マネークエスト 🏰</h1>
            <p class="game-subtitle">〜お金の王国を冒険して投資の知識を身につけよう〜</p>
        </header>

        <div class="status-bar">
            <div class="status-item">
                <div class="status-value" id="goldAmount">1000</div>
                <div class="status-label">💰 ゴールド</div>
            </div>
            <div class="status-item">
                <div class="status-value" id="playerLevel">1</div>
                <div class="status-label">⭐ レベル</div>
            </div>
            <div class="status-item">
                <div class="status-value" id="playerExp">0</div>
                <div class="status-label">✨ 経験値</div>
            </div>
            <div class="status-item">
                <div class="status-value" id="currentArea">お金の王国</div>
                <div class="status-label">🗺️ 現在地</div>
            </div>
        </div>

        <main class="game-area">
            <div id="worldMap" class="world-map">
                <div class="area-card pulse-animation" onclick="enterArea('stocks')">
                    <span class="area-icon">🌲</span>
                    <h3 class="area-name">株の森</h3>
                    <p class="area-description">株式投資の基本を学べる神秘的な森。賢者フクロウが投資の心得を教えてくれます。</p>
                </div>
                
                <div class="area-card pulse-animation" onclick="enterArea('insurance')">
                    <span class="area-icon">🏔️</span>
                    <h3 class="area-name">保険の洞窟</h3>
                    <p class="area-description">リスクに備える保険の知識が眠る洞窟。ドラゴンが保険の重要性を説いてくれます。</p>
                </div>
                
                <div class="area-card pulse-animation" onclick="enterArea('pension')">
                    <span class="area-icon">🗼</span>
                    <h3 class="area-name">年金の塔</h3>
                    <p class="area-description">老後の備えについて学べる高い塔。賢者が年金制度の仕組みを解説してくれます。</p>
                </div>
            </div>


            <div id="quizSection" class="quiz-section">
                <div class="character-dialogue">
                    <div class="character-name" id="characterName">案内人</div>
                    <div class="character-text" id="characterDialogue">
                        ようこそ、勇敢な冒険者よ！お金の王国へようこそ。
                    </div>
                </div>

                <div id="quizContent">
                    <h3 class="quiz-question" id="questionText"></h3>
                    <div class="quiz-options" id="optionsContainer"></div>
                </div>

                <div id="resultMessage" class="result-message hidden"></div>

                <div class="action-buttons">
                    <button class="btn btn-primary" id="nextButton" onclick="nextQuestion()" style="display: none;">次の問題へ</button>
                    <button class="btn" onclick="returnToMap()">マップに戻る</button>
                </div>
            </div>
        </main>
    </div>

    <script>
        let gameState = {
            gold: 1000,
            level: 1,
            exp: 0,
            currentArea: 'map',
            currentQuestionIndex: 0,
            currentAreaQuestions: []
        };

        const gameData = {
            stocks: {
                name: '株の森',
                character: '🦉 フクロウ賢者',
                questions: [
                    {
                        question: '株式投資における「分散投資」の最大のメリットは何でしょうか？',
                        options: [
                            'より多くの利益を得られる',
                            'リスクを軽減できる',
                            '手数料が安くなる',
                            '必ず利益が出る'
                        ],
                        correct: 1,
                        explanation: '分散投資は、複数の銘柄に投資することでリスクを分散し、一つの投資先が下がっても全体への影響を小さくできるのが最大のメリットです。'
                    },
                    {
                        question: '株価が下がった時の正しい心構えは？',
                        options: [
                            'すぐに売却する',
                            '慌てずに状況を分析する',
                            'より多く買い増しする',
                            '投資をやめる'
                        ],
                        correct: 1,
                        explanation: '株価の変動は自然なことです。重要なのは感情的にならず、企業の fundamentals や市場の状況を冷静に分析することです。'
                    },
                    {
                        question: '長期投資の最大のメリットは？',
                        options: [
                            '短期間で大きな利益が得られる',
                            '複利効果を活用できる',
                            '毎日売買する必要がない',
                            '絶対に損をしない'
                        ],
                        correct: 1,
                        explanation: '長期投資では複利効果により、利益が利益を生む効果で資産が指数関数的に成長する可能性があります。時間を味方につけることが重要です。'
                    }
                ]
            },
            insurance: {
                name: '保険の洞窟',
                character: '🐉 ドラゴン・プロテクト',
                questions: [
                    {
                        question: '生命保険の主な目的は何でしょうか？',
                        options: [
                            '投資で利益を得ること',
                            '家族の生活を守ること',
                            '税金を安くすること',
                            'お金を貯めること'
                        ],
                        correct: 1,
                        explanation: '生命保険の最も重要な目的は、万が一の事態が起きた時に残された家族の生活を経済的に支えることです。'
                    },
                    {
                        question: '医療保険を選ぶ際に最も重要なポイントは？',
                        options: [
                            '保険料の安さ',
                            '保障内容の充実度',
                            '会社の知名度',
                            '営業担当者の人柄'
                        ],
                        correct: 1,
                        explanation: '医療保険では、自分に必要な保障がきちんとカバーされているかが最重要です。価格だけでなく内容をしっかり確認しましょう。'
                    },
                    {
                        question: '自動車保険の「対人賠償」とは何を保障するもの？',
                        options: [
                            '自分の車の修理費',
                            '他人にケガをさせた時の賠償',
                            '自分のケガの治療費',
                            '盗難された時の補償'
                        ],
                        correct: 1,
                        explanation: '対人賠償保険は、事故で他人にケガをさせてしまった場合の治療費や慰謝料などを補償します。とても重要な保障です。'
                    }
                ]
            },
            pension: {
                name: '年金の塔',
                character: '🧙‍♂️ 年金マスター',
                questions: [
                    {
                        question: '国民年金の加入義務があるのは何歳から何歳まででしょうか？',
                        options: [
                            '18歳から65歳まで',
                            '20歳から60歳まで',
                            '25歳から65歳まで',
                            '20歳から65歳まで'
                        ],
                        correct: 1,
                        explanation: '国民年金は20歳から60歳までの40年間の加入が義務付けられています。この期間にしっかり保険料を納めることが大切です。'
                    },
                    {
                        question: 'iDeCo（個人型確定拠出年金）の最大のメリットは？',
                        options: [
                            '元本が保証されている',
                            '掛金が全額所得控除になる',
                            '自由に引き出せる',
                            '政府が運用してくれる'
                        ],
                        correct: 1,
                        explanation: 'iDeCoの掛金は全額所得控除の対象となるため、所得税や住民税が軽減される大きなメリットがあります。'
                    },
                    {
                        question: '年金の「2階建て」構造とは？',
                        options: [
                            '国民年金と厚生年金の組み合わせ',
                            '国内年金と海外年金の組み合わせ',
                            '基礎年金と応用年金の組み合わせ',
                            '公的年金と民間年金の組み合わせ'
                        ],
                        correct: 0,
                        explanation: '日本の年金制度は、1階部分が国民年金（基礎年金）、2階部分が厚生年金という2階建ての構造になっています。'
                    }
                ]
            }
        };

        function updateDisplay() {
            const goldElement = document.getElementById('goldAmount');
            goldElement.textContent = gameState.gold;
            
            
            document.getElementById('playerLevel').textContent = gameState.level;
            document.getElementById('playerExp').textContent = gameState.exp;
            document.getElementById('currentArea').textContent = 
                gameState.currentArea === 'map' ? 'お金の王国' : gameData[gameState.currentArea]?.name || 'お金の王国';
        }

        function enterArea(areaId) {
            gameState.currentArea = areaId;
            gameState.currentAreaQuestions = [...gameData[areaId].questions];
            gameState.currentQuestionIndex = 0;
            
            document.getElementById('worldMap').style.display = 'none';
            document.getElementById('quizSection').style.display = 'block';
            
            document.getElementById('characterName').textContent = gameData[areaId].character;
            document.getElementById('characterDialogue').textContent = 
                `${gameData[areaId].name}へようこそ！ここでは${areaId === 'stocks' ? '株式投資' : areaId === 'insurance' ? '保険' : '年金'}について学べます。準備はよろしいですか？`;
            
            showQuestion();
            updateDisplay();
        }

        function showQuestion() {
            const area = gameData[gameState.currentArea];
            const question = area.questions[gameState.currentQuestionIndex];
            
            document.getElementById('questionText').textContent = question.question;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'quiz-option';
                button.textContent = option;
                button.onclick = () => answerQuestion(index);
                optionsContainer.appendChild(button);
            });
            
            document.getElementById('resultMessage').classList.add('hidden');
            document.getElementById('nextButton').style.display = 'none';
        }

        function answerQuestion(selectedIndex) {
            const area = gameData[gameState.currentArea];
            const question = area.questions[gameState.currentQuestionIndex];
            const resultDiv = document.getElementById('resultMessage');
            
            const options = document.querySelectorAll('.quiz-option');
            options.forEach(option => option.disabled = true);
            
            if (selectedIndex === question.correct) {
                resultDiv.textContent = '正解！ ゴールドを獲得しました！';
                resultDiv.className = 'result-message result-correct';
                gameState.gold += 200;
                gameState.exp += 100;
                
                if (gameState.exp >= gameState.level * 300) {
                    gameState.level++;
                    gameState.exp = 0;
                    resultDiv.textContent += ' レベルアップしました！';
                }
            } else {
                resultDiv.textContent = '不正解... ゴールドが減ってしまいました。';
                resultDiv.className = 'result-message result-incorrect';
                gameState.gold = Math.max(0, gameState.gold - 100);
            }
            
            resultDiv.classList.remove('hidden');
            
            setTimeout(() => {
                document.getElementById('characterDialogue').textContent = question.explanation;
                document.getElementById('nextButton').style.display = 'inline-block';
            }, 2000);
            
            updateDisplay();
        }

        function nextQuestion() {
            gameState.currentQuestionIndex++;
            
            if (gameState.currentQuestionIndex >= gameData[gameState.currentArea].questions.length) {
                document.getElementById('characterDialogue').textContent = 
                    `素晴らしい！${gameData[gameState.currentArea].name}のクエストをクリアしました！他のエリアも挑戦してみてください。`;
                document.getElementById('quizContent').innerHTML = '<div style="text-align: center; padding: 40px;"><h2 style="color: #ffd700;">🎉 エリアクリア！ 🎉</h2><p>おめでとうございます！このエリアのすべての問題をクリアしました。</p></div>';
                document.getElementById('nextButton').style.display = 'none';
            } else {
                showQuestion();
            }
        }

        function returnToMap() {
            gameState.currentArea = 'map';
            document.getElementById('worldMap').style.display = 'grid';
            document.getElementById('quizSection').style.display = 'none';
            updateDisplay();
        }


        updateDisplay();
    </script>
</body>
</html>